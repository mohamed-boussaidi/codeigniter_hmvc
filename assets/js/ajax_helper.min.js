$(document).ready(function(){$.ajaxSetup({cache:false});var ajaxModalXhr;var ajaxRequestXhr;var bodySelector=$("body");bodySelector.on("click","[data-act=ajax-modal]",function(){var thisElement=$(this);var data={};var url=thisElement.attr("data-action-url");var title=thisElement.attr("data-title");var ajaxModalTitle=$("#ajaxModalTitle");title?ajaxModalTitle.html(title):ajaxModalTitle.html(ajaxModalTitle).attr("data-title");$("#ajaxModal").modal("show");thisElement.each(function(){$.each(this.attributes,function(){if(this.specified&&this.name.match("^data-post-")){var dataName=this.name.replace("data-post-","");data[dataName]=this.value;}});});ajaxModalXhr=$.ajax({url:url,data:data,type:"POST",success:function(response){$("#ajaxModal").find(".modal-dialog").removeClass("mini-modal");var ajaxModalContent=$("#ajaxModalContent");ajaxModalContent.html(response);var $scroll=ajaxModalContent.find(".modal-body");var height=$scroll.height();var maxHeight=$(window).height()-200;if(height>maxHeight){height=maxHeight;$scroll.slimscroll({alwaysVisible:true,height:height+"px",color:"#98a6ad",borderRadius:"0"});}},statusCode:{404:function(){$("#ajaxModalContent").find(".modal-body").html("");appAlert.error("404: Page not found.",{container:".modal-body",animate:false});}},error:function(){$("#ajaxModalContent").find(".modal-body").html("");appAlert.error("500: Internal Server Error.",{container:".modal-body",animate:false});}});return false;});$("#ajaxModal").on("hidden.bs.modal",function(){ajaxModalXhr.abort();$("#ajaxModal").find(".modal-dialog").addClass("mini-modal");$("#ajaxModalContent").html("");});bodySelector.on("click","[data-act=ajax-request]",function(){var data={};var thisElement=$(this);var url=thisElement.attr("data-action-url");var removeOnSuccess=thisElement.attr("data-remove-on-success");var removeOnClick=thisElement.attr("data-remove-on-click");var inlineLoader=thisElement.attr("data-inline-loader");var reloadOnSuccess=thisElement.attr("data-reload-on-success");var $target="";if(thisElement.attr("data-real-target")){$target=$(thisElement.attr("data-real-target"));}else{if(thisElement.attr("data-closest-target")){$target=thisElement.closest(thisElement.attr("data-closest-target"));}}if(removeOnClick){$(removeOnClick).remove();}thisElement.each(function(){$.each(this.attributes,function(){if(this.specified&&this.name.match("^data-post-")){var dataName=this.name.replace("data-post-","");data[dataName]=this.value;}});});if(inlineLoader==="1"){thisElement.addClass("inline-loader");}else{appLoader.show();}ajaxRequestXhr=$.ajax({url:url,data:data,type:"POST",success:function(response){if(reloadOnSuccess){location.reload();}if(removeOnSuccess){$(removeOnSuccess).remove();}appLoader.hide();if($target.length){$target.html(response);}},statusCode:{404:function(){appLoader.hide();appAlert.error("404: Page not found.");}},error:function(){appLoader.hide();appAlert.error("500: Internal Server Error.");}});});bodySelector.on("click",'[data-toggle="ajax-tab"] a',function(){var thisElement=$(this);var url=thisElement.attr("href");var target=thisElement.attr("data-target");if($(target).html()===""){appLoader.show({container:target,css:"right:50%; bottom:auto;"});$.get(url,function(data){$(target).html(data);});}thisElement.tab("show");return false;});$('[data-toggle="ajax-tab"] a').first().trigger("click");});